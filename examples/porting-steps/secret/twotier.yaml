---
  kind: "ReplicationController"
  apiVersion: "v1"
  metadata:
    name: "twotier"
  spec:
    replicas: 2
    template:
      metadata:
        labels:
          role: "front"
      spec:
        volumes:
        - name: "password"
          secret:
            secretName: "mysql-pw"
        containers:
        - name: "twotier"
          image: "gcr.io/google-samples/steps-twotier:secret"
          ports:
          - name: "http-server"
            hostPort: 80
            containerPort: 8080
            protocol: "TCP"
          volumeMounts:
          - name: "password"
            mountPath: "/etc/mysql-password"
            readOnly: true
---
  kind: "Service"
  apiVersion: "v1"
  metadata:
    name: "twotier"
  spec:
    ports:
    - protocol: "TCP"
      port: 80
      targetPort: "http-server"
    selector:
      role: "front"
    type: "LoadBalancer"
