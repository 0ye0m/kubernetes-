apiVersion: v1
kind: PersistentVolume
metadata:
  name: kube-registry
spec:
{% if pillar.get('cluster_registry_disk_type', '') == 'gce' %}
  capacity:
    storage: {{ pillar['cluster_registry_disk_size'] }}
  accessModes:
    - ReadWriteOnce
  gcePersistentDisk:
    pdName: "{{ pillar['cluster_registry_disk_name'] }}"
    fsType: "ext4"
{% endif %}
{% if pillar.get('cluster_registry_disk_type', '') == 'nfs' %}
  capacity:
    storage: {{ pillar['cluster_registry_disk_size'] }}
  accessModes:
    - ReadWriteOnce
  persistentVolumeReclaimPolicy: Recycle
  nfs:
    path: "{{ pillar['cluster_registry_path'] }}"
    server: "{{ pillar['cluster_registry_disk_ip'] }}"
{% endif %}
