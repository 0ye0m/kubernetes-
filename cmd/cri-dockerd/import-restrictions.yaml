# The aim of restricting imports here is to reduce the number of dependencies to
#  "k8s.io/kubernetes/*" packages over time (especially those under pkg/kubelet)

- baseImportPath: "./cmd/cri-dockerd"
  allowedImports:
    - k8s.io/apimachinery/pkg/apis/meta/v1
    - k8s.io/apiserver/pkg/server
    - k8s.io/apiserver/pkg/util/flag
    - k8s.io/component-base/logs
    - k8s.io/klog
    - k8s.io/kubernetes/cmd/cri-dockerd/app
    - k8s.io/kubernetes/cmd/cri-dockerd/app/config
    - k8s.io/kubernetes/cmd/cri-dockerd/app/options
    - k8s.io/kubernetes/pkg/kubelet/dockershim
    - k8s.io/kubernetes/pkg/kubelet/dockershim/remote
    - k8s.io/kubernetes/pkg/kubelet/server/streaming
    - k8s.io/kubernetes/pkg/util/flag
    - k8s.io/kubernetes/pkg/version/verflag

# The aim of restricting imports here is to be able to extract the streaming package
# out of "pkg/kubelet" so it can be extracted out for use with cri-dockerd

- baseImportPath: "./pkg/kubelet/server/streaming"
  allowedImports:
    - k8s.io/apimachinery/pkg/types
    - k8s.io/apimachinery/pkg/util/clock
    - k8s.io/apimachinery/pkg/util/remotecommand
    - k8s.io/client-go/rest
    - k8s.io/client-go/tools/remotecommand
    - k8s.io/client-go/transport/spdy
    - k8s.io/kubernetes/pkg/apis/core
    - k8s.io/kubernetes/pkg/kubelet/apis/cri/runtime/v1alpha2
    - k8s.io/kubernetes/pkg/kubelet/server/streaming/portforward
    - k8s.io/kubernetes/pkg/kubelet/server/streaming/remotecommand

# The aim of restricting imports here is to remove things that dockershim depends
# on in "pkg/kubelet" and avoid adding more debt.

- baseImportPath: "./pkg/kubelet/dockershim"
  allowedImports:
    - k8s.io/api/core/v1
    - k8s.io/apimachinery/pkg/apis/meta/v1
    - k8s.io/apimachinery/pkg/types
    - k8s.io/apimachinery/pkg/util/clock
    - k8s.io/apimachinery/pkg/util/errors
    - k8s.io/apimachinery/pkg/util/sets
    - k8s.io/apimachinery/pkg/util/validation
    - k8s.io/client-go/kubernetes
    - k8s.io/client-go/tools/remotecommand
    - k8s.io/klog
    - k8s.io/kubernetes/pkg/credentialprovider
    - k8s.io/kubernetes/pkg/kubelet/apis/config
    - k8s.io/kubernetes/pkg/kubelet/apis/cri/runtime/v1alpha2
    - k8s.io/kubernetes/pkg/kubelet/checkpointmanager
    - k8s.io/kubernetes/pkg/kubelet/checkpointmanager/checksum
    - k8s.io/kubernetes/pkg/kubelet/checkpointmanager/errors
    - k8s.io/kubernetes/pkg/kubelet/container
    - k8s.io/kubernetes/pkg/kubelet/container/testing
    - k8s.io/kubernetes/pkg/kubelet/dockershim
    - k8s.io/kubernetes/pkg/kubelet/dockershim/cm
    - k8s.io/kubernetes/pkg/kubelet/dockershim/libdocker
    - k8s.io/kubernetes/pkg/kubelet/dockershim/metrics
    - k8s.io/kubernetes/pkg/kubelet/dockershim/network
    - k8s.io/kubernetes/pkg/kubelet/dockershim/network/cni
    - k8s.io/kubernetes/pkg/kubelet/dockershim/network/hostport
    - k8s.io/kubernetes/pkg/kubelet/dockershim/network/kubenet
    - k8s.io/kubernetes/pkg/kubelet/dockershim/network/metrics
    - k8s.io/kubernetes/pkg/kubelet/dockershim/network/testing
    - k8s.io/kubernetes/pkg/kubelet/kuberuntime
    - k8s.io/kubernetes/pkg/kubelet/leaky
    - k8s.io/kubernetes/pkg/kubelet/qos
    - k8s.io/kubernetes/pkg/kubelet/server/streaming
    - k8s.io/kubernetes/pkg/kubelet/types
    - k8s.io/kubernetes/pkg/kubelet/util
    - k8s.io/kubernetes/pkg/kubelet/util/cache
    - k8s.io/kubernetes/pkg/kubelet/util/ioutils
    - k8s.io/kubernetes/pkg/proxy/iptables
    - k8s.io/kubernetes/pkg/security/apparmor
    - k8s.io/kubernetes/pkg/util/bandwidth
    - k8s.io/kubernetes/pkg/util/conntrack
    - k8s.io/kubernetes/pkg/util/iptables
    - k8s.io/kubernetes/pkg/util/parsers
    - k8s.io/kubernetes/pkg/util/sysctl
    - k8s.io/kubernetes/pkg/util/sysctl/testing
    - k8s.io/utils/exec
    - k8s.io/utils/exec/testing
    - k8s.io/utils/net
